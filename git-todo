#!/bin/sh
set -e
  GIT_OPTS=""
  OUTPUT_FILTER="cat" # no-op
  RED=$(tput setaf 1)
  GREEN=$(tput setaf 2)
  date_format=$(tput bold; tput setaf 4)
  ref_name_format=$(tput setaf 3)
  bold=$(tput bold)
  reset=$(tput sgr0)
  ifs=$IFS

  IFS=""
  todos=$(git notes show | grep @todo | sed -e 's/@todo//')
  dones=$(git notes show | grep @done | sed -e 's/@done//')

# List all todos
list()
{
  echo "$GREEN@done$reset"
  while read -a task; do
    echo "$GREEN X$reset${task}"
  done <<< $dones

  echo "$RED@todo$reset"
  while read -a task; do
    echo "$RED O$reset${task}"
  done <<< $todos
}

# Create a new Todo
# add() {}

# Get rid of a todo
# remove() {}

# Commit a todo as finished
# finish() {
  # Commit with todo as message
  # Copy notes from HEAD~1 to HEAD
  # move message from @todo to @done
# }

list
